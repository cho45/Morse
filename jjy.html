<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

		<title>WebAudio JJY シミュレータ</title>

		<script type="text/javascript" src="morse.js"></script>
		<script type="text/javascript" src="jjy.js"></script>

		<link rel="preconnect" href="https://ntp-a1.nict.go.jp" crossorigin>
		<link rel="preconnect" href="https://ntp-b1.nict.go.jp" crossorigin>
		<style>
			.correct-time #time {
				color: green;
				font-weight: bold;
			}

			.correct-time #time::after {
				content: " クライアント時刻はあっているようです";
			}

			.incorrect-time #time {
				color: orange;
				font-weight: bold;
			}

			.incorrect-time #time::after {
				content: " クライアント時刻がずれているようです。NTP などの設定をおすすめします";
			}
		</style>
	</head>
	<body>
		<button id="play">開始</button>
		<p>
			JJY を CW モードで聞いたときの音をシミュレートします。
			<a href="./vhf-jjy.html">短波JJY版</a>
		</p>
		<p>
			高精度タイマーである performance.now() に依存しています。
		</p>
		<p id="time"></p>
		<fieldset>
			<legend>オプション</legend>
			<p>
				<label>
					音量
					<input type="range" id="gain" max="1.0" min="0.0" step="0.1" value="0.5">
				</label>
			</p>
			<p>
				<label>
					トーン周波数
					<input type="number" id="tone" max="1500" min="300" step="100" value="600"> 
				</label>
				<p></p>
			</p>
			<div>
				<label>
					<input type="checkbox" id="forceSendCallSign">
					強制的に毎分呼び出し符号送出
				</label>
				<p>通常は15分、45分に送出される呼び出し符号を毎分送出します</p>
			</div>
		</fieldset>

		<hr>

		<p>
			性質上完全に同期した時刻にはなっていません。
		</p>

		<p>
			<a href="http://www.nict.go.jp/JST/http.html">クライアント時刻の正しさの検証は NICT の JST API で求めています</a> 
		</p>
	</body>
</html>
